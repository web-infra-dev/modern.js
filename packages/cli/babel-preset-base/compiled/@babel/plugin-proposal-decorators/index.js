(()=>{"use strict";var e={626:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.requeueComputedKeyAndDecorators=requeueComputedKeyAndDecorators;t.skipAllButComputedKey=skipAllButComputedKey;function skipAllButComputedKey(e){e.skip();if(e.node.computed){e.context.maybeQueue(e.get("key"))}}function requeueComputedKeyAndDecorators(e){const{context:t,node:s}=e;if(s.computed){t.maybeQueue(e.get("key"))}if(s.decorators){for(const s of e.get("decorators")){t.maybeQueue(s)}}}const s={FunctionParent(e){if(e.isArrowFunctionExpression()){return}else{e.skip();if(e.isMethod()){requeueComputedKeyAndDecorators(e)}}},Property(e){if(e.isObjectProperty()){return}e.skip();requeueComputedKeyAndDecorators(e)}};var r=s;t["default"]=r},499:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});var r=s(740);function _interopNamespace(e){if(e&&e.__esModule)return e;var t=Object.create(null);if(e){Object.keys(e).forEach((function(s){if(s!=="default"){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r.get?r:{enumerable:true,get:function(){return e[s]}})}}))}t["default"]=e;return Object.freeze(t)}var o=_interopNamespace(r);function willPathCastToBoolean(e){const t=e;const{node:s,parentPath:r}=t;if(r.isLogicalExpression()){const{operator:e,right:t}=r.node;if(e==="&&"||e==="||"||e==="??"&&s===t){return willPathCastToBoolean(r)}}if(r.isSequenceExpression()){const{expressions:e}=r.node;if(e[e.length-1]===s){return willPathCastToBoolean(r)}else{return true}}return r.isConditional({test:s})||r.isUnaryExpression({operator:"!"})||r.isLoop({test:s})}const{LOGICAL_OPERATORS:n,arrowFunctionExpression:i,assignmentExpression:a,binaryExpression:p,booleanLiteral:c,callExpression:l,cloneNode:d,conditionalExpression:u,identifier:f,isMemberExpression:y,isOptionalCallExpression:h,isOptionalMemberExpression:m,isUpdateExpression:g,logicalExpression:x,memberExpression:E,nullLiteral:b,optionalCallExpression:v,optionalMemberExpression:P,sequenceExpression:C,updateExpression:S}=o;class AssignmentMemoiser{constructor(){this._map=void 0;this._map=new WeakMap}has(e){return this._map.has(e)}get(e){if(!this.has(e))return;const t=this._map.get(e);const{value:s}=t;t.count--;if(t.count===0){return a("=",s,e)}return s}set(e,t,s){return this._map.set(e,{count:s,value:t})}}function toNonOptional(e,t){const{node:s}=e;if(m(s)){return E(t,s.property,s.computed)}if(e.isOptionalCallExpression()){const s=e.get("callee");if(e.node.optional&&s.isOptionalMemberExpression()){const{object:r}=s.node;const o=e.scope.maybeGenerateMemoised(r)||r;s.get("object").replaceWith(a("=",o,r));return l(E(t,f("call")),[o,...e.node.arguments])}return l(t,e.node.arguments)}return e.node}function isInDetachedTree(e){while(e){if(e.isProgram())break;const{parentPath:t,container:s,listKey:r}=e;const o=t.node;if(r){if(s!==o[r])return true}else{if(s!==o)return true}e=t}return false}const D={memoise(){},handle(e,t){const{node:s,parent:r,parentPath:o,scope:E}=e;if(e.isOptionalMemberExpression()){if(isInDetachedTree(e))return;const n=e.find((({node:t,parent:s})=>{if(m(s)){return s.optional||s.object!==t}if(h(s)){return t!==e.node&&s.optional||s.callee!==t}return true}));if(E.path.isPattern()){n.replaceWith(l(i([],n.node),[]));return}const g=willPathCastToBoolean(n);const C=n.parentPath;if(C.isUpdateExpression({argument:s})||C.isAssignmentExpression({left:s})){throw e.buildCodeFrameError(`can't handle assignment`)}const S=C.isUnaryExpression({operator:"delete"});if(S&&n.isOptionalMemberExpression()&&n.get("property").isPrivateName()){throw e.buildCodeFrameError(`can't delete a private class element`)}let D=e;for(;;){if(D.isOptionalMemberExpression()){if(D.node.optional)break;D=D.get("object");continue}else if(D.isOptionalCallExpression()){if(D.node.optional)break;D=D.get("callee");continue}throw new Error(`Internal error: unexpected ${D.node.type}`)}const _=D.isOptionalMemberExpression()?"object":"callee";const N=D.node[_];const O=E.maybeGenerateMemoised(N);const k=O!=null?O:N;const M=o.isOptionalCallExpression({callee:s});const isOptionalCall=e=>M;const A=o.isCallExpression({callee:s});D.replaceWith(toNonOptional(D,k));if(isOptionalCall()){if(r.optional){o.replaceWith(this.optionalCall(e,r.arguments))}else{o.replaceWith(this.call(e,r.arguments))}}else if(A){e.replaceWith(this.boundGet(e))}else{e.replaceWith(this.get(e))}let w=e.node;for(let t=e;t!==n;){const e=t.parentPath;if(e===n&&isOptionalCall()&&r.optional){w=e.node;break}w=toNonOptional(e,w);t=e}let j;const T=n.parentPath;if(y(w)&&T.isOptionalCallExpression({callee:n.node,optional:true})){const{object:t}=w;j=e.scope.maybeGenerateMemoised(t);if(j){w.object=a("=",j,t)}}let I=n;if(S){I=T;w=T.node}const R=O?a("=",d(k),d(N)):d(k);if(g){let e;if(t){e=p("!=",R,b())}else{e=x("&&",p("!==",R,b()),p("!==",d(k),E.buildUndefinedNode()))}I.replaceWith(x("&&",e,w))}else{let e;if(t){e=p("==",R,b())}else{e=x("||",p("===",R,b()),p("===",d(k),E.buildUndefinedNode()))}I.replaceWith(u(e,S?c(true):E.buildUndefinedNode(),w))}if(j){const e=T.node;T.replaceWith(v(P(e.callee,f("call"),false,true),[d(j),...e.arguments],false))}return}if(g(r,{argument:s})){if(this.simpleSet){e.replaceWith(this.simpleSet(e));return}const{operator:t,prefix:n}=r;this.memoise(e,2);const i=E.generateUidIdentifierBasedOnNode(s);E.push({id:i});const p=[a("=",d(i),this.get(e))];if(n){p.push(S(t,d(i),n));const s=C(p);o.replaceWith(this.set(e,s));return}else{const r=E.generateUidIdentifierBasedOnNode(s);E.push({id:r});p.push(a("=",d(r),S(t,d(i),n)),d(i));const c=C(p);o.replaceWith(C([this.set(e,c),d(r)]));return}}if(o.isAssignmentExpression({left:s})){if(this.simpleSet){e.replaceWith(this.simpleSet(e));return}const{operator:t,right:s}=o.node;if(t==="="){o.replaceWith(this.set(e,s))}else{const r=t.slice(0,-1);if(n.includes(r)){this.memoise(e,1);o.replaceWith(x(r,this.get(e),this.set(e,s)))}else{this.memoise(e,2);o.replaceWith(this.set(e,p(r,this.get(e),s)))}}return}if(o.isCallExpression({callee:s})){o.replaceWith(this.call(e,o.node.arguments));return}if(o.isOptionalCallExpression({callee:s})){if(E.path.isPattern()){o.replaceWith(l(i([],o.node),[]));return}o.replaceWith(this.optionalCall(e,o.node.arguments));return}if(o.isForXStatement({left:s})||o.isObjectProperty({value:s})&&o.parentPath.isObjectPattern()||o.isAssignmentPattern({left:s})&&o.parentPath.isObjectProperty({value:r})&&o.parentPath.parentPath.isObjectPattern()||o.isArrayPattern()||o.isAssignmentPattern({left:s})&&o.parentPath.isArrayPattern()||o.isRestElement()){e.replaceWith(this.destructureSet(e));return}if(o.isTaggedTemplateExpression()){e.replaceWith(this.boundGet(e))}else{e.replaceWith(this.get(e))}}};function memberExpressionToFunctions(e,t,s){e.traverse(t,Object.assign({},D,s,{memoiser:new AssignmentMemoiser}))}t["default"]=memberExpressionToFunctions},327:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=optimiseCallExpression;var r=s(740);const{callExpression:o,identifier:n,isIdentifier:i,isSpreadElement:a,memberExpression:p,optionalCallExpression:c,optionalMemberExpression:l}=r;function optimiseCallExpression(e,t,s,r){if(s.length===1&&a(s[0])&&i(s[0].argument,{name:"arguments"})){if(r){return c(l(e,n("apply"),false,true),[t,s[0].argument],false)}return o(p(e,n("apply")),[t,s[0].argument])}else{if(r){return c(l(e,n("call"),false,true),[t,...s],false)}return o(p(e,n("call")),[t,...s])}}},987:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;Object.defineProperty(t,"environmentVisitor",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"skipAllButComputedKey",{enumerable:true,get:function(){return i.skipAllButComputedKey}});var r=s(303);var o=s(499);var n=s(327);var i=s(626);var a=s(740);const{assignmentExpression:p,booleanLiteral:c,callExpression:l,cloneNode:d,identifier:u,memberExpression:f,sequenceExpression:y,stringLiteral:h,thisExpression:m}=a;function getPrototypeOfExpression(e,t,s,r){e=d(e);const o=t||r?e:f(e,u("prototype"));return l(s.addHelper("getPrototypeOf"),[o])}const g=r.default.visitors.merge([i.default,{Super(e,t){const{node:s,parentPath:r}=e;if(!r.isMemberExpression({object:s}))return;t.handle(r)}}]);const x=r.default.visitors.merge([i.default,{Scopable(e,{refName:t}){const s=e.scope.getOwnBinding(t);if(s&&s.identifier.name===t){e.scope.rename(t)}}}]);const E={memoise(e,t){const{scope:s,node:r}=e;const{computed:o,property:n}=r;if(!o){return}const i=s.maybeGenerateMemoised(n);if(!i){return}this.memoiser.set(n,i,t)},prop(e){const{computed:t,property:s}=e.node;if(this.memoiser.has(s)){return d(this.memoiser.get(s))}if(t){return d(s)}return h(s.name)},get(e){return this._get(e,this._getThisRefs())},_get(e,t){const s=getPrototypeOfExpression(this.getObjectRef(),this.isStatic,this.file,this.isPrivateMethod);return l(this.file.addHelper("get"),[t.memo?y([t.memo,s]):s,this.prop(e),t.this])},_getThisRefs(){if(!this.isDerivedConstructor){return{this:m()}}const e=this.scope.generateDeclaredUidIdentifier("thisSuper");return{memo:p("=",e,m()),this:d(e)}},set(e,t){const s=this._getThisRefs();const r=getPrototypeOfExpression(this.getObjectRef(),this.isStatic,this.file,this.isPrivateMethod);return l(this.file.addHelper("set"),[s.memo?y([s.memo,r]):r,this.prop(e),t,s.this,c(e.isInStrictMode())])},destructureSet(e){throw e.buildCodeFrameError(`Destructuring to a super field is not supported yet.`)},call(e,t){const s=this._getThisRefs();return(0,n.default)(this._get(e,s),d(s.this),t,false)},optionalCall(e,t){const s=this._getThisRefs();return(0,n.default)(this._get(e,s),d(s.this),t,true)}};const b=Object.assign({},E,{prop(e){const{property:t}=e.node;if(this.memoiser.has(t)){return d(this.memoiser.get(t))}return d(t)},get(e){const{isStatic:t,getSuperRef:s}=this;const{computed:r}=e.node;const o=this.prop(e);let n;if(t){var i;n=(i=s())!=null?i:f(u("Function"),u("prototype"))}else{var a;n=f((a=s())!=null?a:u("Object"),u("prototype"))}return f(n,o,r)},set(e,t){const{computed:s}=e.node;const r=this.prop(e);return p("=",f(m(),r,s),t)},destructureSet(e){const{computed:t}=e.node;const s=this.prop(e);return f(m(),s,t)},call(e,t){return(0,n.default)(this.get(e),m(),t,false)},optionalCall(e,t){return(0,n.default)(this.get(e),m(),t,true)}});class ReplaceSupers{constructor(e){var t;const s=e.methodPath;this.methodPath=s;this.isDerivedConstructor=s.isClassMethod({kind:"constructor"})&&!!e.superRef;this.isStatic=s.isObjectMethod()||s.node.static||(s.isStaticBlock==null?void 0:s.isStaticBlock());this.isPrivateMethod=s.isPrivate()&&s.isMethod();this.file=e.file;this.constantSuper=(t=e.constantSuper)!=null?t:e.isLoose;this.opts=e}getObjectRef(){return d(this.opts.objectRef||this.opts.getObjectRef())}getSuperRef(){if(this.opts.superRef)return d(this.opts.superRef);if(this.opts.getSuperRef)return d(this.opts.getSuperRef())}replace(){if(this.opts.refToPreserve){this.methodPath.traverse(x,{refName:this.opts.refToPreserve.name})}const e=this.constantSuper?b:E;(0,o.default)(this.methodPath,g,Object.assign({file:this.file,scope:this.methodPath.scope,isDerivedConstructor:this.isDerivedConstructor,isStatic:this.isStatic,isPrivateMethod:this.isPrivateMethod,getObjectRef:this.getObjectRef.bind(this),getSuperRef:this.getSuperRef.bind(this),boundGet:e.get},e))}}t["default"]=ReplaceSupers},9:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=splitExportDeclaration;var r=s(740);const{cloneNode:o,exportNamedDeclaration:n,exportSpecifier:i,identifier:a,variableDeclaration:p,variableDeclarator:c}=r;function splitExportDeclaration(e){if(!e.isExportDeclaration()){throw new Error("Only export declarations can be split.")}const t=e.isExportDefaultDeclaration();const s=e.get("declaration");const r=s.isClassDeclaration();if(t){const t=s.isFunctionDeclaration()||r;const l=s.isScope()?s.scope.parent:s.scope;let d=s.node.id;let u=false;if(!d){u=true;d=l.generateUidIdentifier("default");if(t||s.isFunctionExpression()||s.isClassExpression()){s.node.id=o(d)}}const f=t?s:p("var",[c(o(d),s.node)]);const y=n(null,[i(o(d),a("default"))]);e.insertAfter(y);e.replaceWith(f);if(u){l.registerDeclaration(e)}return e}if(e.get("specifiers").length>0){throw new Error("It doesn't make sense to split exported specifiers.")}const l=s.getOuterBindingIdentifiers();const d=Object.keys(l).map((e=>i(a(e),a(e))));const u=n(null,d);e.insertAfter(u);e.replaceWith(s.node);return e}},351:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=_default;var r=s(718);var o=s(929);var n=s(987);var i=s(9);function incrementId(e,t=e.length-1){if(t===-1){e.unshift(65);return}const s=e[t];if(s===90){e[t]=97}else if(s===122){e[t]=65;incrementId(e,t-1)}else{e[t]=s+1}}function createPrivateUidGeneratorForClass(e){const t=[];const s=new Set;e.traverse({PrivateName(e){s.add(e.node.id.name)}});return()=>{let e;do{incrementId(t);e=String.fromCharCode(...t)}while(s.has(e));return r.types.privateName(r.types.identifier(e))}}function createLazyPrivateUidGeneratorForClass(e){let t;return()=>{if(!t){t=createPrivateUidGeneratorForClass(e)}return t()}}function replaceClassWithVar(e){if(e.type==="ClassDeclaration"){const t=e.scope.generateUidIdentifierBasedOnNode(e.node.id);const s=r.types.identifier(e.node.id.name);e.scope.rename(s.name,t.name);e.insertBefore(r.types.variableDeclaration("let",[r.types.variableDeclarator(t)]));e.get("id").replaceWith(s);return[r.types.cloneNode(t),e]}else{let t;let s;if(e.node.id){t=e.node.id.name;s=e.scope.parent.generateDeclaredUidIdentifier(t);e.scope.rename(t,s.name)}else if(e.parentPath.node.type==="VariableDeclarator"&&e.parentPath.node.id.type==="Identifier"){t=e.parentPath.node.id.name;s=e.scope.parent.generateDeclaredUidIdentifier(t)}else{s=e.scope.parent.generateDeclaredUidIdentifier("decorated_class")}const o=r.types.classExpression(t&&r.types.identifier(t),e.node.superClass,e.node.body);const[n]=e.replaceWith(r.types.sequenceExpression([o,s]));return[r.types.cloneNode(s),n.get("expressions.0")]}}function generateClassProperty(e,t,s){if(e.type==="PrivateName"){return r.types.classPrivateProperty(e,t,undefined,s)}else{return r.types.classProperty(e,t,undefined,undefined,s)}}function addProxyAccessorsFor(e,t,s,o=false){const{static:n}=e.node;const i=r.types.blockStatement([r.types.returnStatement(r.types.memberExpression(r.types.thisExpression(),r.types.cloneNode(s)))]);const a=r.types.blockStatement([r.types.expressionStatement(r.types.assignmentExpression("=",r.types.memberExpression(r.types.thisExpression(),r.types.cloneNode(s)),r.types.identifier("v")))]);let p,c;if(t.type==="PrivateName"){p=r.types.classPrivateMethod("get",r.types.cloneNode(t),[],i,n);c=r.types.classPrivateMethod("set",r.types.cloneNode(t),[r.types.identifier("v")],a,n)}else{p=r.types.classMethod("get",r.types.cloneNode(t),[],i,o,n);c=r.types.classMethod("set",r.types.cloneNode(t),[r.types.identifier("v")],a,o,n)}e.insertAfter(c);e.insertAfter(p)}function extractProxyAccessorsFor(e){return[r.types.functionExpression(undefined,[],r.types.blockStatement([r.types.returnStatement(r.types.memberExpression(r.types.thisExpression(),r.types.cloneNode(e)))])),r.types.functionExpression(undefined,[r.types.identifier("value")],r.types.blockStatement([r.types.expressionStatement(r.types.assignmentExpression("=",r.types.memberExpression(r.types.thisExpression(),r.types.cloneNode(e)),r.types.identifier("value")))]))]}const a=0;const p=1;const c=2;const l=3;const d=4;const u=5;function getElementKind(e){switch(e.node.type){case"ClassProperty":case"ClassPrivateProperty":return a;case"ClassAccessorProperty":return p;case"ClassMethod":case"ClassPrivateMethod":if(e.node.kind==="get"){return l}else if(e.node.kind==="set"){return d}else{return c}}}function isDecoratorInfo(e){return"decorators"in e}function filteredOrderedDecoratorInfo(e){const t=e.filter(isDecoratorInfo);return[...t.filter((e=>e.isStatic&&e.kind>=p&&e.kind<=d)),...t.filter((e=>!e.isStatic&&e.kind>=p&&e.kind<=d)),...t.filter((e=>e.isStatic&&e.kind===a)),...t.filter((e=>!e.isStatic&&e.kind===a))]}function generateDecorationExprs(e){return r.types.arrayExpression(filteredOrderedDecoratorInfo(e).map((e=>{const t=e.decorators.length>1?r.types.arrayExpression(e.decorators):e.decorators[0];const s=e.isStatic?e.kind+u:e.kind;const o=[t,r.types.numericLiteral(s),e.name];const{privateMethods:n}=e;if(Array.isArray(n)){o.push(...n)}else if(n){o.push(n)}return r.types.arrayExpression(o)})))}function extractElementLocalAssignments(e){const t=[];for(const s of filteredOrderedDecoratorInfo(e)){const{locals:e}=s;if(Array.isArray(e)){t.push(...e)}else if(e!==undefined){t.push(e)}}return t}function addCallAccessorsFor(e,t,s,o){e.insertAfter(r.types.classPrivateMethod("get",r.types.cloneNode(t),[],r.types.blockStatement([r.types.returnStatement(r.types.callExpression(r.types.cloneNode(s),[r.types.thisExpression()]))])));e.insertAfter(r.types.classPrivateMethod("set",r.types.cloneNode(t),[r.types.identifier("v")],r.types.blockStatement([r.types.expressionStatement(r.types.callExpression(r.types.cloneNode(o),[r.types.thisExpression(),r.types.identifier("v")]))])))}function isNotTsParameter(e){return e.type!=="TSParameterProperty"}function movePrivateAccessor(e,t,s,o){let n;let i;if(e.node.kind==="set"){n=[r.types.identifier("v")];i=[r.types.expressionStatement(r.types.callExpression(s,[r.types.thisExpression(),r.types.identifier("v")]))]}else{n=[];i=[r.types.returnStatement(r.types.callExpression(s,[r.types.thisExpression()]))]}e.replaceWith(r.types.classPrivateMethod(e.node.kind,r.types.cloneNode(t),n,r.types.blockStatement(i),o))}function isClassDecoratableElementPath(e){const{type:t}=e;return t!=="TSDeclareMethod"&&t!=="TSIndexSignature"&&t!=="StaticBlock"}function staticBlockToIIFE(e){return r.types.callExpression(r.types.arrowFunctionExpression([],r.types.blockStatement(e.body)),[])}function maybeSequenceExpression(e){if(e.length===0)return r.types.unaryExpression("void",r.types.numericLiteral(0));if(e.length===1)return e[0];return r.types.sequenceExpression(e)}function transformClass(e,t,s){const o=e.get("body.body");const i=e.node.decorators;let c=false;const u=createLazyPrivateUidGeneratorForClass(e);for(const e of o){if(!isClassDecoratableElementPath(e)){continue}if(e.node.decorators&&e.node.decorators.length>0){c=true}else if(e.node.type==="ClassAccessorProperty"){const{key:t,value:s,static:o,computed:n}=e.node;const i=u();const a=s?r.types.cloneNode(s):undefined;const p=generateClassProperty(i,a,o);const[c]=e.replaceWith(p);addProxyAccessorsFor(c,t,i,n)}}if(!i&&!c)return;const f=[];let y;let h;let m=false;let g=false;const x=new Set;let E,b,v,P;const C=[];const S=e.scope.parent;const memoiseExpression=(e,t)=>{const s=S.generateDeclaredUidIdentifier(t);C.push(r.types.assignmentExpression("=",s,e));return r.types.cloneNode(s)};if(i){v=S.generateDeclaredUidIdentifier("initClass");const[t,s]=replaceClassWithVar(e);e=s;P=t;e.node.decorators=null;for(const e of i){if(!S.isStatic(e.expression)){e.expression=memoiseExpression(e.expression,"dec")}}}else{if(!e.node.id){e.node.id=e.scope.generateUidIdentifier("Class")}P=r.types.cloneNode(e.node.id)}if(c){for(const i of o){if(!isClassDecoratableElementPath(i)){continue}const{node:o}=i;const c=i.get("decorators");const E=Array.isArray(c)&&c.length>0;if(E){for(const e of c){if(!S.isStatic(e.node.expression)){e.node.expression=memoiseExpression(e.node.expression,"dec")}}}const b="computed"in i.node&&i.node.computed===true;if(b){if(!S.isStatic(o.key)){o.key=memoiseExpression(o.key,"computedKey")}}const v=getElementKind(i);const{key:C}=o;const D=C.type==="PrivateName";const _=!!i.node.static;let N="computedKey";if(D){N=C.id.name}else if(!b&&C.type==="Identifier"){N=C.name}if(i.isClassMethod({kind:"constructor"})){h=i}if(E){let o;let h;if(v===p){const{value:e}=i.node;const t=[r.types.thisExpression()];if(e){t.push(r.types.cloneNode(e))}const s=u();const n=i.scope.parent.generateDeclaredUidIdentifier(`init_${N}`);const a=r.types.callExpression(r.types.cloneNode(n),t);const p=generateClassProperty(s,a,_);const[c]=i.replaceWith(p);if(D){h=extractProxyAccessorsFor(s);const e=c.scope.parent.generateDeclaredUidIdentifier(`get_${N}`);const t=c.scope.parent.generateDeclaredUidIdentifier(`set_${N}`);addCallAccessorsFor(c,C,e,t);o=[n,e,t]}else{addProxyAccessorsFor(c,C,s,b);o=n}}else if(v===a){const e=i.scope.parent.generateDeclaredUidIdentifier(`init_${N}`);const t=i.get("value");t.replaceWith(r.types.callExpression(r.types.cloneNode(e),[r.types.thisExpression(),t.node].filter((e=>e))));o=e;if(D){h=extractProxyAccessorsFor(C)}}else if(D){o=i.scope.parent.generateDeclaredUidIdentifier(`call_${N}`);const a=new n.default({constantSuper:s,methodPath:i,objectRef:P,superRef:e.node.superClass,file:t,refToPreserve:P});a.replace();const{params:p,body:c,async:u}=i.node;h=r.types.functionExpression(undefined,p.filter(isNotTsParameter),c,u);if(v===l||v===d){movePrivateAccessor(i,r.types.cloneNode(C),r.types.cloneNode(o),_)}else{const t=i.node;e.node.body.body.unshift(r.types.classPrivateProperty(C,r.types.cloneNode(o),[],t.static));x.add(C.id.name);i.remove()}}let E;if(b){E=r.types.cloneNode(C)}else if(C.type==="PrivateName"){E=r.types.stringLiteral(C.id.name)}else if(C.type==="Identifier"){E=r.types.stringLiteral(C.name)}else{E=r.types.cloneNode(C)}f.push({kind:v,decorators:c.map((e=>e.node.expression)),name:E,isStatic:_,privateMethods:h,locals:o});if(v!==a){if(_){g=true}else{m=true}}if(i.node){i.node.decorators=null}if(!y&&(v===a||v===p)){y=i}}}}const D=generateDecorationExprs(f);const _=r.types.arrayExpression((i||[]).map((e=>e.expression)));const N=extractElementLocalAssignments(f);if(m){E=S.generateDeclaredUidIdentifier("initProto");N.push(E);const t=r.types.callExpression(r.types.cloneNode(E),[r.types.thisExpression()]);if(y){const e=y.get("value");const s=[t];if(e.node){s.push(e.node)}e.replaceWith(r.types.sequenceExpression(s))}else if(h){if(e.node.superClass){e.traverse({CallExpression:{exit(e){if(!e.get("callee").isSuper())return;e.replaceWith(r.types.callExpression(r.types.cloneNode(E),[e.node]));e.skip()}}})}else{h.node.body.body.unshift(r.types.expressionStatement(t))}}else{const s=[r.types.expressionStatement(t)];if(e.node.superClass){s.unshift(r.types.expressionStatement(r.types.callExpression(r.types.super(),[r.types.spreadElement(r.types.identifier("args"))])))}e.node.body.body.unshift(r.types.classMethod("constructor",r.types.identifier("constructor"),[r.types.restElement(r.types.identifier("args"))],r.types.blockStatement(s)))}}if(g){b=S.generateDeclaredUidIdentifier("initStatic");N.push(b)}if(x.size>0){e.traverse({PrivateName(e){if(!x.has(e.node.id.name))return;const t=e.parentPath;const s=t.parentPath;if(s.node.type==="AssignmentExpression"&&s.node.left===t.node||s.node.type==="UpdateExpression"||s.node.type==="RestElement"||s.node.type==="ArrayPattern"||s.node.type==="ObjectProperty"&&s.node.value===t.node&&s.parentPath.type==="ObjectPattern"||s.node.type==="ForOfStatement"&&s.node.left===t.node){throw e.buildCodeFrameError(`Decorated private methods are not updatable, but "#${e.node.id.name}" is updated via this expression.`)}}})}let O=false;const k=v&&r.types.callExpression(r.types.cloneNode(v),[]);const M=e.node;if(i){N.push(P,v);const s=[];let o=[];e.get("body.body").forEach((e=>{if(e.isStaticBlock()){o.push(e.node);e.remove();return}const t=e.isClassProperty()||e.isClassPrivateProperty();if((t||e.isClassPrivateMethod())&&e.node.static){if(t&&o.length>0){const t=o.map(staticBlockToIIFE);if(e.node.value)t.push(e.node.value);e.node.value=maybeSequenceExpression(t);o=[]}e.node.static=false;s.push(e.node);e.remove()}}));if(s.length>0||o.length>0){const n=r.template.expression.ast`
        class extends ${t.addHelper("identity")} {}
      `;n.body.body=[r.types.staticBlock([r.types.toStatement(e.node,false)]),...s];const i=[];const a=r.types.newExpression(n,[]);if(o.length>0){i.push(...o.map(staticBlockToIIFE))}if(k){O=true;i.push(k)}if(i.length>0){i.unshift(r.types.callExpression(r.types.super(),[r.types.cloneNode(P)]));n.body.body.push(r.types.classMethod("constructor",r.types.identifier("constructor"),[],r.types.blockStatement([r.types.expressionStatement(r.types.sequenceExpression(i))])))}else{a.arguments.push(r.types.cloneNode(P))}e.replaceWith(a)}}if(!O&&k){e.node.body.body.push(r.types.staticBlock([r.types.expressionStatement(k)]))}M.body.body.unshift(r.types.staticBlock([r.types.expressionStatement(r.types.assignmentExpression("=",r.types.arrayPattern(N),r.types.callExpression(t.addHelper("applyDecs"),[r.types.thisExpression(),D,_]))),g&&r.types.expressionStatement(r.types.callExpression(r.types.cloneNode(b),[r.types.thisExpression()]))].filter(Boolean)));e.insertBefore(C.map((e=>r.types.expressionStatement(e))));e.scope.crawl();return e}function _default({assertVersion:e,assumption:t},{loose:s}){var r;e("^7.16.0");const n=new WeakSet;const a=(r=t("constantSuper"))!=null?r:s;return{name:"proposal-decorators",inherits:o.default,visitor:{"ExportNamedDeclaration|ExportDefaultDeclaration"(e){var t;const{declaration:s}=e.node;if((s==null?void 0:s.type)==="ClassDeclaration"&&((t=s.decorators)==null?void 0:t.length)>0){(0,i.default)(e)}},Class(e,t){if(n.has(e))return;const s=transformClass(e,t,a);if(s)n.add(s)}}}}},807:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=s(718);const o=(0,r.template)(`\n  DECORATOR(CLASS_REF = INNER) || CLASS_REF;\n`);const n=(0,r.template)(`\n  CLASS_REF.prototype;\n`);const i=(0,r.template)(`\n    Object.getOwnPropertyDescriptor(TARGET, PROPERTY);\n`);const a=(0,r.template)(`\n    (TEMP = Object.getOwnPropertyDescriptor(TARGET, PROPERTY), (TEMP = TEMP ? TEMP.value : undefined), {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        initializer: function(){\n            return TEMP;\n        }\n    })\n`);const p=new WeakSet;function applyEnsureOrdering(e){const t=(e.isClass()?[e].concat(e.get("body.body")):e.get("properties")).reduce(((e,t)=>e.concat(t.node.decorators||[])),[]);const s=t.filter((e=>!r.types.isIdentifier(e.expression)));if(s.length===0)return;return r.types.sequenceExpression(s.map((t=>{const s=t.expression;const o=t.expression=e.scope.generateDeclaredUidIdentifier("dec");return r.types.assignmentExpression("=",o,s)})).concat([e.node]))}function applyClassDecorators(e){if(!hasClassDecorators(e.node))return;const t=e.node.decorators||[];e.node.decorators=null;const s=e.scope.generateDeclaredUidIdentifier("class");return t.map((e=>e.expression)).reverse().reduce((function(e,t){return o({CLASS_REF:r.types.cloneNode(s),DECORATOR:r.types.cloneNode(t),INNER:e}).expression}),e.node)}function hasClassDecorators(e){return!!(e.decorators&&e.decorators.length)}function applyMethodDecorators(e,t){if(!hasMethodDecorators(e.node.body.body))return;return applyTargetDecorators(e,t,e.node.body.body)}function hasMethodDecorators(e){return e.some((e=>{var t;return(t=e.decorators)==null?void 0:t.length}))}function applyObjectDecorators(e,t){if(!hasMethodDecorators(e.node.properties))return;return applyTargetDecorators(e,t,e.node.properties)}function applyTargetDecorators(e,t,s){const o=e.scope.generateDeclaredUidIdentifier(e.isClass()?"class":"obj");const c=s.reduce((function(s,c){const l=c.decorators||[];c.decorators=null;if(l.length===0)return s;if(c.computed){throw e.buildCodeFrameError("Computed method/property decorators are not yet supported.")}const d=r.types.isLiteral(c.key)?c.key:r.types.stringLiteral(c.key.name);const u=e.isClass()&&!c.static?n({CLASS_REF:o}).expression:o;if(r.types.isClassProperty(c,{static:false})){const o=e.scope.generateDeclaredUidIdentifier("descriptor");const n=c.value?r.types.functionExpression(null,[],r.types.blockStatement([r.types.returnStatement(c.value)])):r.types.nullLiteral();c.value=r.types.callExpression(t.addHelper("initializerWarningHelper"),[o,r.types.thisExpression()]);p.add(c.value);s.push(r.types.assignmentExpression("=",r.types.cloneNode(o),r.types.callExpression(t.addHelper("applyDecoratedDescriptor"),[r.types.cloneNode(u),r.types.cloneNode(d),r.types.arrayExpression(l.map((e=>r.types.cloneNode(e.expression)))),r.types.objectExpression([r.types.objectProperty(r.types.identifier("configurable"),r.types.booleanLiteral(true)),r.types.objectProperty(r.types.identifier("enumerable"),r.types.booleanLiteral(true)),r.types.objectProperty(r.types.identifier("writable"),r.types.booleanLiteral(true)),r.types.objectProperty(r.types.identifier("initializer"),n)])])))}else{s.push(r.types.callExpression(t.addHelper("applyDecoratedDescriptor"),[r.types.cloneNode(u),r.types.cloneNode(d),r.types.arrayExpression(l.map((e=>r.types.cloneNode(e.expression)))),r.types.isObjectProperty(c)||r.types.isClassProperty(c,{static:true})?a({TEMP:e.scope.generateDeclaredUidIdentifier("init"),TARGET:r.types.cloneNode(u),PROPERTY:r.types.cloneNode(d)}).expression:i({TARGET:r.types.cloneNode(u),PROPERTY:r.types.cloneNode(d)}).expression,r.types.cloneNode(u)]))}return s}),[]);return r.types.sequenceExpression([r.types.assignmentExpression("=",r.types.cloneNode(o),e.node),r.types.sequenceExpression(c),r.types.cloneNode(o)])}function decoratedClassToExpression({node:e,scope:t}){if(!hasClassDecorators(e)&&!hasMethodDecorators(e.body.body)){return}const s=e.id?r.types.cloneNode(e.id):t.generateUidIdentifier("class");return r.types.variableDeclaration("let",[r.types.variableDeclarator(s,r.types.toExpression(e))])}var c={ExportDefaultDeclaration(e){const t=e.get("declaration");if(!t.isClassDeclaration())return;const s=decoratedClassToExpression(t);if(s){const[o]=e.replaceWithMultiple([s,r.types.exportNamedDeclaration(null,[r.types.exportSpecifier(r.types.cloneNode(s.declarations[0].id),r.types.identifier("default"))])]);if(!t.node.id){e.scope.registerDeclaration(o)}}},ClassDeclaration(e){const t=decoratedClassToExpression(e);if(t){e.replaceWith(t)}},ClassExpression(e,t){const s=applyEnsureOrdering(e)||applyClassDecorators(e)||applyMethodDecorators(e,t);if(s)e.replaceWith(s)},ObjectExpression(e,t){const s=applyEnsureOrdering(e)||applyObjectDecorators(e,t);if(s)e.replaceWith(s)},AssignmentExpression(e,t){if(!p.has(e.node.right))return;e.replaceWith(r.types.callExpression(t.addHelper("initializerDefineProperty"),[r.types.cloneNode(e.get("left.object").node),r.types.stringLiteral(e.get("left.property").node.name||e.get("left.property").node.value),r.types.cloneNode(e.get("right.arguments")[0].node),r.types.cloneNode(e.get("right.arguments")[1].node)]))},CallExpression(e,t){if(e.node.arguments.length!==3)return;if(!p.has(e.node.arguments[2]))return;if(e.node.callee.name!==t.addHelper("defineProperty").name){return}e.replaceWith(r.types.callExpression(t.addHelper("initializerDefineProperty"),[r.types.cloneNode(e.get("arguments")[0].node),r.types.cloneNode(e.get("arguments")[1].node),r.types.cloneNode(e.get("arguments.2.arguments")[0].node),r.types.cloneNode(e.get("arguments.2.arguments")[1].node)]))}};t["default"]=c},929:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=s(345);var o=(0,r.declare)(((e,t)=>{e.assertVersion(7);const{legacy:s,version:r=(s?"legacy":"2018-09"),decoratorsBeforeExport:o=(r==="2021-12"?false:undefined)}=t;if(r!=="2021-12"&&r!=="2018-09"&&r!=="legacy"){throw new Error("Unsupported decorators version: "+r)}if(s!==undefined){if(typeof s!=="boolean"){throw new Error(".legacy must be a boolean.")}if(t.version!==undefined){throw new Error("You can either use the .legacy or the .version option, not both.")}}if(o===undefined){if(r==="2018-09"){throw new Error("The decorators plugin, when .version is '2018-09' or not specified,"+" requires a 'decoratorsBeforeExport' option, whose value must be a boolean.")}}else{if(r==="legacy"){throw new Error("'decoratorsBeforeExport' can't be used with legacy decorators.")}if(typeof o!=="boolean"){throw new Error("'decoratorsBeforeExport' must be a boolean.")}}return{name:"syntax-decorators",manipulateOptions({generatorOpts:e},t){if(r==="legacy"){t.plugins.push("decorators-legacy")}else if(r==="2018-09"){t.plugins.push(["decorators",{decoratorsBeforeExport:o}]);e.decoratorsBeforeExport=o}else{t.plugins.push(["decorators",{decoratorsBeforeExport:o}],"decoratorAutoAccessors");e.decoratorsBeforeExport=o}}}}));t["default"]=o},308:e=>{e.exports=require("../helper-create-class-features-plugin")},345:e=>{e.exports=require("../helper-plugin-utils")},303:e=>{e.exports=require("../traverse")},740:e=>{e.exports=require("../types")},718:e=>{e.exports=require("@babel/core")}};var t={};function __nccwpck_require__(s){var r=t[s];if(r!==undefined){return r.exports}var o=t[s]={exports:{}};var n=true;try{e[s](o,o.exports,__nccwpck_require__);n=false}finally{if(n)delete t[s]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:true});e["default"]=void 0;var t=__nccwpck_require__(345);var r=__nccwpck_require__(929);var o=__nccwpck_require__(308);var n=__nccwpck_require__(807);var i=__nccwpck_require__(351);var a=(0,t.declare)(((e,t)=>{e.assertVersion(7);const{legacy:s,version:a}=t;if(s||a==="legacy"){return{name:"proposal-decorators",inherits:r.default,visitor:n.default}}else if(a==="2021-12"){return(0,i.default)(e,t)}else{return(0,o.createClassFeaturePlugin)({name:"proposal-decorators",api:e,feature:o.FEATURES.decorators,inherits:r.default})}}));e["default"]=a})();module.exports=s})();