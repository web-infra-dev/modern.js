# è‡ªå®šä¹‰ä¸»é¢˜

æœ¬æ–‡æ‰€è¦ä»‹ç»çš„æ˜¯å¦‚ä½•å¼€å‘ä¸€å¥—è‡ªå®šä¹‰ä¸»é¢˜ã€‚

## åŸºäºé»˜è®¤ä¸»é¢˜çš„æ‰©å±•

å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ å¹¶ä¸æƒ³ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªä¸»é¢˜ï¼Œè€Œæ˜¯æƒ³åŸºäºé»˜è®¤ä¸»é¢˜è¿›è¡Œæ‰©å±•ï¼Œè¿™æ—¶å€™å¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹å¼è¿›è¡Œä¸»é¢˜å¼€å‘ã€‚

:::tip
å¦‚æœä½ æƒ³ä»å¤´å¼€å‘ä¸€å¥—è‡ªå®šä¹‰ä¸»é¢˜ï¼Œå¯ä»¥å‰å¾€[ã€é‡æ–°å¼€å‘è‡ªå®šä¹‰ä¸»é¢˜ã€‘](/advanced/custom-theme#é‡æ–°å¼€å‘è‡ªå®šä¹‰ä¸»é¢˜)ã€‚
:::

### 1. åŸºæœ¬ç»“æ„

é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `theme` ç›®å½•ï¼Œç„¶ååœ¨ `theme` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `index.ts` æˆ–è€… `index.tsx` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç”¨äºå¯¼å‡ºä¸»é¢˜é…ç½®ã€‚

```bash
â”œâ”€â”€ theme
â”‚   â””â”€â”€ index.tsx
```

ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥ä¹¦å†™ `theme/index.tsx` æ–‡ä»¶:

```tsx title="theme/index.tsx"
import Theme from '@modern-js/doc-tools/theme';

const Layout = () => <Theme.Layout beforeNavTitle={<div>some content</div>} />;

export default {
  ...Theme,
  Layout,
};

export * from '@modern-js/doc-tools/theme';
```

ä¸€æ–¹é¢ä½ éœ€è¦é€šè¿‡ `export default` å¯¼å‡ºä¸€ä¸ªä¸»é¢˜é…ç½®å¯¹è±¡ï¼Œå¦ä¸€æ–¹é¢ä½ éœ€è¦é€šè¿‡ `export * from '@modern-js/doc-tools/theme'` å¯¼å‡ºæ‰€æœ‰å…·åå¯¼å‡ºçš„å†…å®¹ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ä½ çš„ä¸»é¢˜é…ç½®èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚

### 2. ä½¿ç”¨æ’æ§½

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒLayout ç»„ä»¶è®¾è®¡äº†ä¸€ç³»åˆ—çš„ props æ”¯æŒæ’æ§½å…ƒç´ ï¼Œä½ å¯ä»¥é€šè¿‡è¿™äº› props æ¥æ‰©å±•é»˜è®¤ä¸»é¢˜çš„å¸ƒå±€ï¼Œæ¯”å¦‚å°†ä¸Šé¢çš„ Layout ç»„ä»¶æ”¹æˆå¦‚ä¸‹çš„å½¢å¼:

```tsx
import { Layout as DefaultLayout } from '@modern-js/doc-tools/theme';

// ä»¥ä¸‹å±•ç¤ºæ‰€æœ‰çš„ Props
const Layout = () => (
  <DefaultLayout
    /* Home é¡µ Hero éƒ¨åˆ†ä¹‹å‰ */
    beforeHero={<div>beforeHero</div>}
    /* Home é¡µ Hero éƒ¨åˆ†ä¹‹å */
    afterHero={<div>afterHero</div>}
    /* Home é¡µ Features éƒ¨åˆ†ä¹‹å‰ */
    beforeFeatures={<div>beforeFeatures</div>}
    /* Home é¡µ Features éƒ¨åˆ†ä¹‹å */
    afterFeatures={<div>afterFeatures</div>}
    /* æ­£æ–‡é¡µ Footer éƒ¨åˆ†ä¹‹å‰ */
    beforeDocFooter={<div>beforeDocFooter</div>}
    /* æ­£æ–‡é¡µæœ€å‰é¢ */
    beforeDoc={<div>beforeDoc</div>}
    /* æ­£æ–‡é¡µæœ€åé¢ */
    afterDoc={<div>afterDoc</div>}
    /* å¯¼èˆªæ ä¹‹å‰ */
    beforeNav={<div>beforeNav</div>}
    /* å·¦ä¸Šè§’å¯¼èˆªæ æ ‡é¢˜ä¹‹å‰ */
    beforeNavTitle={<span>ğŸ˜„</span>}
    /* å·¦ä¸Šè§’å¯¼èˆªæ æ ‡é¢˜ä¹‹å */
    afterNavTitle={<div>afterNavTitle</div>}
    /* å³ä¾§å¤§çº²æ ä¸Šé¢ */
    beforeOutline={<div>beforeOutline</div>}
    /* å³ä¾§å¤§çº²æ ä¸‹é¢ */
    afterOutline={<div>afterOutline</div>}
    /* æ•´ä¸ªé¡µé¢æœ€é¡¶éƒ¨ */
    top={<div>top</div>}
    /* æ•´ä¸ªé¡µé¢æœ€åº•éƒ¨ */
    bottom={<div>bottom</div>}
  />
);

export default {
  ...Theme,
  Layout,
};

export * from '@modern-js/doc-tools/theme';
```

### 3. è‡ªå®šä¹‰ç»„ä»¶

è¦æ‰©å±•é»˜è®¤ä¸»é¢˜çš„ç»„ä»¶ï¼Œé™¤äº†æ’æ§½ï¼Œä½ è¿˜å¯ä»¥è‡ªå®šä¹‰ Home é¡µé¢åŠ 404 é¡µé¢ç»„ä»¶ï¼Œæ¯”å¦‚:

```tsx title="theme/index.tsx"
import Theme from '@modern-js/doc-tools/theme';

const Layout = () => <Theme.Layout beforeNavTitle={<div>some content</div>} />;

// å®šåˆ¶ Home é¡µé¢
const HomeLayout = () => <div>Home</div>;
// å®šåˆ¶ 404 é¡µé¢
const NotFoundLayout = () => <div>404</div>;

export default {
  ...Theme,
  Layout,
  HomeLayout,
  NotFoundLayout,
};

export * from '@modern-js/doc-tools/theme';
```

å½“ç„¶ï¼Œåœ¨å¼€å‘è¿‡ç¨‹å¯èƒ½éœ€è¦ä½¿ç”¨é¡µé¢çš„æ•°æ®ï¼Œä½ å¯ä»¥é€šè¿‡ [`usePageData`](/api/api-runtime#usepagedata) è¿™ä¸ª Hook æ¥è·å–ã€‚

## é‡æ–°å¼€å‘è‡ªå®šä¹‰ä¸»é¢˜

å¦‚æœä½ è¦ä»å¤´å¼€å§‹å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰ä¸»é¢˜ï¼Œä½ éœ€è¦äº†è§£ä¸€ä¸‹ä¸»é¢˜çš„ç»„æˆã€‚

### 1. åŸºæœ¬ç»“æ„

é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `theme` ç›®å½•ï¼Œç„¶ååœ¨ `theme` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `index.ts` æˆ–è€… `index.tsx` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç”¨äºå¯¼å‡ºä¸»é¢˜é…ç½®ã€‚

```bash
â”œâ”€â”€ theme
â”‚   â””â”€â”€ index.tsx
```

åœ¨`theme/index.tsx`æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦å¯¼å‡ºä¸€ä¸ª Layout ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯ä½ çš„ä¸»é¢˜çš„å…¥å£ç»„ä»¶:

```ts
// theme/index.tsx
function Layout() {
  return <div>Custom Theme Layout</div>;
}

// setup å‡½æ•°ï¼Œä¼šåœ¨é¡µé¢åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œä¸€èˆ¬ç”¨æ¥åšå…¨å±€äº‹ä»¶çš„ç›‘å¬ï¼Œå¯ä¸ºç©ºå‡½æ•°
const setup = () => {};

// å¯¼å‡º Layout ç»„ä»¶å’Œ setup å‡½æ•°
// ä¸¤è€…å¿…é¡»å¯¼å‡º
export { Layout, setup };
```

è¿™ä¸ª Layout ç»„ä»¶ä¼šè¢«ç”¨æ¥æ¸²æŸ“æ•´ä¸ªæ–‡æ¡£ç«™ç‚¹çš„å¸ƒå±€ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªç»„ä»¶ä¸­å¼•å…¥ä½ çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œæ¯”å¦‚:

```ts
// theme/index.tsx
import { Navbar } from './Navbar';

function Layout() {
  return (
    <div>
      <Navbar />
      <div>Custom Theme Layout</div>
    </div>
  );
}

const setup = () => {};

export { Layoutm, setup };

// theme/Navbar.tsx
export function Navbar() {
  return <div>Custom Navbar</div>;
}
```

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸»é¢˜ç»„ä»¶æ˜¯å¦‚ä½•è·å–é¡µé¢æ•°æ®å’Œæ­£æ–‡ MDX ç»„ä»¶å†…å®¹çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„ APIã€‚

### 2. è¿è¡Œæ—¶ API

#### usePageData

è·å–ç«™ç‚¹æ‰€æœ‰æ•°æ®çš„ä¿¡æ¯ï¼Œæ¯”å¦‚:

```tsx
import { usePageData } from '@modern-js/doc-tools/runtime';

import { usePageData } from '@modern-js/doc-tools/runtime';

function MyComponent() {
  const pageData = usePageData();
  return <div>{pageData.title}</div>;
}
```

#### useLang

è·å–å½“å‰è¯­è¨€ä¿¡æ¯ï¼Œæ¯”å¦‚:

```tsx
import { useLang } from '@modern-js/doc-tools/runtime';

function MyComponent() {
  const lang = useLang();
  return <div>{lang}</div>;
}
```

#### Content

æ­£æ–‡ MDX ç»„ä»¶å†…å®¹ï¼Œå¦‚:

```tsx
import { Content } from '@modern-js/doc-tools/runtime';

function Layout() {
  return (
    <div>
      <Content />
    </div>
  );
}
```

#### è·¯ç”± Hook

æ¡†æ¶å†…éƒ¨ç”¨ [react-router-dom](https://reactrouter.com/) æ¥å®ç°è·¯ç”±ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ `react-router-dom` çš„ Hookï¼Œæ¯”å¦‚:

```ts
import { useLocation } from '@modern-js/doc-tools/runtime';

function Layout() {
  const location = useLocation();
  return <div>Current location: {location.pathname}</div>;
}
```
