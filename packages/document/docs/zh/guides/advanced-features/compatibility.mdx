---
sidebar_position: 6
---

# 浏览器兼容性

## Browserslist 配置

Modern.js 支持通过三种方式来设置 Web 应用需要兼容的浏览器范围。

### 方式一：通过`.browserslistrc` 文件配置

Modern.js 支持设置 Web 应用需要兼容的浏览器范围，你可以在 `.browserslistrc` 文件里设置 [Browserslist](https://browsersl.ist/) 的值。

当你创建一个新的 Modern.js 项目时，默认会包含一份 `.browserslistrc` 配置，这表示 JavaScript 代码会被编译至 ES6 格式。

import DefaultBrowserslist from '@site-docs/components/default-browserslist';

<DefaultBrowserslist />

当项目中未指定 `overrideBrowserslist` 配置时，该 `.browserslistrc` 文件会默认生效。

### 方式二：通过 package.json 配置

你也可以在 `package.json` 文件中设置 `browserslist` 字段来配置 browserslist:

```json title="package.json"
{
  "browserslist": [
    "chrome >= 87"
    // 其他浏览器的配置...
  ]
}
```

### 方式三：通过 `output.overrideBrowserslist` 配置

你也可以在 `modern.config.js` 文件中设置 [`output.overrideBrowserslist`](/configure/app/output/override-browserslist) 字段来配置 browserslist:

```js title="modern.config.js"
export default {
  output: {
    overrideBrowserslist: [
      'chrome >= 87',
      // 其他浏览器的配置...
    ],
  },
};
```

### 配置优先级

`overrideBrowserslist` 配置的优先级高于项目中的 `.browserslistrc` 配置文件和 package.json 中的 `browserslist` 字段。

大多数场景下，推荐优先使用 `.browserslistrc` 文件，而不是使用 `overrideBrowserslist` 配置。因为 `.browserslistrc` 文件是官方定义的配置文件，通用性更强，可以被社区中的其他库识别。

:::tip
请查看 [Rsbuild - 设置浏览器范围](https://v2.rsbuild.rs/zh/guide/advanced/browserslist) 来了解更多内容。
:::

import UpgradeBrowserslist from '@site-docs/components/upgrade-browserslist';

<UpgradeBrowserslist />

## Polyfill

### 编译时 Polyfill

Modern.js 在编译时默认通过 [core-js](https://github.com/zloirock/core-js) 引入对应的 Polyfill 代码。

默认情况下会根据项目 Browserslist 的设置情况引入所需的 Polyfill 代码， 这样基本不用再担心项目源码和第三方依赖的 Polyfill 问题了，但是因为包含了一些没有用到的 Polyfill 代码，所以最终的包大小可能会有所增加。

:::info
对于明确第三方依赖不需要 Polyfill 的场景，可以设置 [`output.polyfill`](/configure/app/output/polyfill) 为 `usage`, 这样 Babel 编译时只会根据代码中使用到的语法引入 Polyfill 代码。

:::

import UAPolyfill from '@site-docs/components/ua-polyfill';

<UAPolyfill />
