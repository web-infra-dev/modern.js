---
sidebar_label: entries
---

# source.entries

- **Type:**

```ts
type Entries = Record<
  string,
  | string
  | {
      entry: string;
      disableMount?: boolean;
      customBootstrap?: string;
    }
>;
```

- **Default:** An entry object calculated from the directory structure of the current project.

Used to configure custom page entries.

:::tip When to use
For most scenarios, the entries automatically generated by Modern.js according to the directory structure can already meet the requirements. For details, please refer to [entries](/guides/concept/entries).

If you need to customize the page entry, you can set it through this option.

:::

## String

When the value of `entries` object is `string` type, it means the file path of the entry module:

```ts title="modern.config.ts"
import { defineConfig } from '@modern-js/app-tools';

export default defineConfig({
  source: {
    entries: {
      // Specify a new entry named entry_customize
      entry_customize: './src/home/test/index.ts',
    },
    disableDefaultEntries: true,
  },
});
```

By default, the configured entry is equivalent to `App.[jt]sx`, that is, the specified entry file **only needs to export the root component of the application**.

For example the following directory structure:

```bash
.
├── src
│   └── entry
│       ├── chat.tsx
│       └── home.tsx
└── package.json
```

The above directory does not conform to the directory structure convention of Modern.js, therefore, Modern.js will not get any default entry when analyzing the directory structure.

In cases where you do not want to change the directory structure (such as project migration), you can customize the entry through `source.entries`:

```ts title="modern.config.ts"
export default defineConfig({
  source: {
    entries: {
      home: './src/entry/home.tsx',
      chat: './src/entry/chat.tsx',
    },
    disableDefaultEntries: true,
  },
});
```

## Object

When the value is `Object`, the following properties can be configured:

- `entry`: `string`, entry file path.
- `disableMount`: `boolean = false`, turn off the entry-scanning behavior of Modern.js.
- `customBootstrap`: `string = ''`, [Custom Bootstrap](/guides/concept/entries#custom-bootstrap) file path。

```ts title="modern.config.ts"
import { defineConfig } from '@modern-js/app-tools';

export default defineConfig({
  source: {
    entries: {
      entry_customize: {
        // entry file path
        entry: './src/home/test/App.tsx',
      },
    },
    disableDefaultEntries: true,
  },
});
```

### Disable entry file generation

By default, the configured entry is equivalent to `App.[jt]sx`, and Modern.js will automatically generate an entry file to reference your configured entry.

If you want to disable the logic of Modern.js automatically generating the entry file, you can set the `disableMount` property to `true`.

```ts title="modern.config.ts"
export default defineConfig({
  source: {
    entries: {
      entry_customize: {
        entry: './src/home/test/index.tsx',
        disableMount: true,
      },
    },
    // Disable default ingress scanning
    disableDefaultEntries: true,
  },
});
```

### Conventional Routing

If you need to enable conventional routing for a custom entry, you can set `entry` to a directory path:

```ts title="modern.config.ts"
import { defineConfig } from '@modern-js/app-tools';

export default defineConfig({
  source: {
    entries: {
      // enable conventional routing
      entry_spa: {
        // The entry path of conventional routing must be set to a directory
        entry: './src/about',
      },
    },
    disableDefaultEntries: true,
  },
});
```

## Entry Merge Rules

After setting `source.entries`, if `disableDefaultEntries: true` is not set, Modern.js will merge the custom entry with the entry obtained by analyzing the directory structure.

The merge rule is:

- Compare the entry path set by the custom entry with the default entry path. When the entry path is consistent, the custom entry will override the default entry.

For example the following directory structure:

```bash
.
├── src
│   ├── chat
│   │   └── App.tsx
│   └── home
│       └── index.ts
└── package.json
```

Modern.js will analyze the `src/` directory to get the default entries `chat` and `home`. When the user configures the following in the `modern.config.ts` file:

```ts title="modern.config.ts"
import { defineConfig } from '@modern-js/app-tools';

export default defineConfig({
  source: {
    entries: {
      index: './src/home/index.ts',
    },
  },
};
```

You can see that the path of the custom entry `index` is the same as the path of the default entry `home`. During the merging process, `index` will override `home`, and the final entry is as follows:

- `chat -> ./src/chat/App.tsx`
- `index -> ./src/home/index.ts`
