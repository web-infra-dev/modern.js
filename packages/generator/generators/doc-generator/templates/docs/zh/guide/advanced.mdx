# ç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒ

ä¸€ä¸ª npm ç±»å‹çš„æ¨¡å—é¡¹ç›®å‘å¸ƒæµç¨‹åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼š

- ç¬¬ä¸€é˜¶æ®µæ˜¯åœ¨å¼€å‘æœŸé—´ï¼Œå¼€å‘è€…éœ€è¦æä¾›ä¸€ä¸ªå˜æ›´æ–‡ä»¶æ¥è®°å½•éœ€è¦å‘å¸ƒçš„å˜åŠ¨ï¼›
- ç¬¬äºŒé˜¶æ®µæ˜¯åœ¨å‘å¸ƒæœŸé—´ï¼ŒModule Tools å¯ä»¥æ”¶é›†æ‰€æœ‰çš„å˜æ›´æ–‡ä»¶æ¥æ›´æ–°ç‰ˆæœ¬ã€æ›´æ–°å‘å¸ƒæ—¥å¿—ï¼Œå¹¶å‘å¸ƒæ–°çš„åŒ…åˆ° [npm Registry](https://www.npmjs.com/) ä¸Šã€‚

## è·Ÿè¸ªå˜æ›´

**å½“é¡¹ç›®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™éœ€è¦å°†å˜åŒ–çš„å†…å®¹è®°å½•ä¸‹æ¥**ã€‚é¡¹ç›®å‘ç”Ÿçš„å˜åŒ–ä¸€èˆ¬æ˜¯æŒ‡ï¼š

- æ–°åŠŸèƒ½
- ä¿®å¤é—®é¢˜
- é…ç½®æ–‡ä»¶ä¿®æ”¹
- ...

å½“è¿™äº›å˜åŒ–ä¸€æ—¦å®Œæˆåï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å¯¹å½“å‰çš„å˜åŒ–è¿›è¡Œè®°å½•ï¼š

- [`modern change`](/guide/basic/command-preview#modern-change)

æ‰§è¡Œ `modern change` å‘½ä»¤åä¼šå‘å¼€å‘è€…æå‡ºå‡ ä¸ªé—®é¢˜ï¼Œå¹¶æ ¹æ®å¼€å‘è€…çš„å›ç­”ç”Ÿæˆå˜æ›´è®°å½•ã€‚å˜æ›´è®°å½•æ–‡ä»¶åŒ…å«äº†ç‰ˆæœ¬å˜åŒ–çš„ç±»å‹å’Œå…¶æè¿°ï¼Œè¯¥æ–‡ä»¶ä¼šè¢«æäº¤åˆ° git ä»“åº“ä¸­ã€‚

```bash
$ npx modern change
ğŸ¦‹  What kind of change is this for module-example? (current version is 0.1.0) Â· patch
ğŸ¦‹  Please enter a summary for this change (this will be in the changelogs). Submit empty line to open external editor
ğŸ¦‹  Summary Â· publish test
ğŸ¦‹  === Releasing the following packages ===
ğŸ¦‹  [Patch]
ğŸ¦‹    module
ğŸ¦‹  Is this your desired changeset? (Y/n) Â· true
ğŸ¦‹  Changeset added! - you can now commit it
ğŸ¦‹
ğŸ¦‹  If you want to modify or expand on the changeset summary, you can find it here
ğŸ¦‹  info /xxxxxx/module/.changeset/brave-dryers-agree.md
```

å½“æ‰§è¡ŒæˆåŠŸåï¼Œç”Ÿæˆçš„åŒ…å«å˜æ›´è®°å½•çš„ Markdown æ–‡ä»¶ä¼šä¿å­˜åœ¨é¡¹ç›®çš„ `.changeset` ç›®å½•ä¸‹é¢ã€‚å…¶å†…å®¹ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š

```markdown .changeset/brave-dryers-agree.md
---
"module-example": patch
---

publish test
```

## ç‰ˆæœ¬æ›´æ–°

å½“éœ€è¦æ›´æ–°é¡¹ç›®ç‰ˆæœ¬çš„æ—¶å€™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

- [`modern bump`](/guide/basic/command-preview#modern-bump)

æ‰§è¡Œ `modern bump` å°†ä¼šåŸºäº `.changeset/` ç›®å½•ä¸‹è®°å½•äº†å˜æ›´çš„ Markdown æ–‡ä»¶å†…å®¹æ¥ä¿®æ”¹ `package.json` ä¸­çš„ç‰ˆæœ¬å·ï¼ŒåŒæ—¶ç”Ÿæˆ `CHANGELOG.md` æ–‡ä»¶ã€‚**è€Œå½“ç‰ˆæœ¬æ›´æ–°å®Œæˆåï¼Œè¿™äº›è®°å½•å˜æ›´çš„ Markdown æ–‡ä»¶ä¹Ÿä¼šè¢«åˆ é™¤ï¼Œä¹Ÿå¯è¯´è¿™äº› Markdown æ–‡ä»¶è¢«â€œæ¶ˆè€—â€æ‰äº†**ã€‚

```markdown CHANGELOG.md
# module

## 0.1.1

### Patch Changes

- publish test
```

## å‘å¸ƒ

å‘å¸ƒé¡¹ç›®å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

- [`modern publish`](/guide/basic/command-preview#modern-release)

`modern release` å‘½ä»¤å¯ä»¥å°†é¡¹ç›®å‘å¸ƒåˆ° npm Registryã€‚

æ­¤æ—¶å‘å¸ƒçš„æ˜¯ `latest` ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯æ­£å¼ç‰ˆæœ¬ã€‚å¦‚æœæƒ³è¦ä¿®æ”¹ `dist-tag`ï¼Œå¯ä»¥é€šè¿‡ `modern release --tag` å‘½ä»¤æ¥æŒ‡å®šã€‚ä¾‹å¦‚ï¼š

```bash
modern release --tag beta
```

ä½†æ˜¯å¦‚æœå¸Œæœ›å°†å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å·ä¹Ÿä¿®æ”¹ä¸ºé¢„å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼Œåˆ™éœ€è¦ä½¿ç”¨ `modern pre` å‘½ä»¤ã€‚

> æ‰€è°“ `dist-tag`ï¼Œå¯ä»¥ç†è§£ï¼šä¸ºå½“å‰å‘å¸ƒçš„ç‰ˆæœ¬æ‰“æ ‡ç­¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé»˜è®¤å‘å¸ƒçš„ç‰ˆæœ¬å¯¹åº”çš„ `dist-tag` ä¸º `latest`ï¼Œå› æ­¤å¯ä»¥æŠŠ `latest` è®¤ä¸ºæ˜¯æ­£å¼ç‰ˆæœ¬çš„ `dist-tag`ã€‚

## é¢„å‘å¸ƒ

å½“éœ€è¦åœ¨æ­£å¼å‘å¸ƒä¹‹å‰è¿›è¡Œé¢„å‘å¸ƒï¼Œåˆ™éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

- [`modern pre`](/guide/basic/command-preview#modern-pre)

é¦–å…ˆ `modern pre enter <tag>` è¿›å…¥é¢„å‘å¸ƒæ¨¡å¼ï¼Œ`<tag>` å¯ä»¥ä¸å‘å¸ƒé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ `modern release --tag` å‘½ä»¤æŒ‡å®šçš„ `tag` ä¸€è‡´ã€‚

```bash
$ npx modern pre enter next
ğŸ¦‹  success Entered pre mode with tag next
ğŸ¦‹  info Run `changeset version` to version packages with prerelease versions
âœ¨  Done in 5.30s.
```

æ¥ç€å¯ä»¥ä½¿ç”¨ `modern bump` å‘½ä»¤æ›´æ–°å…·ä½“çš„ç‰ˆæœ¬å·ï¼Œ**æ­¤æ—¶ä¸ä¼šçœŸæ­£çš„â€œæ¶ˆè€—â€è®°å½•å˜æ›´çš„ Markdown æ–‡ä»¶**ï¼š

```bash
$ npx modern bump
ğŸ¦‹  warn ===============================IMPORTANT!===============================
ğŸ¦‹  warn You are in prerelease mode
ğŸ¦‹  warn If you meant to do a normal release you should revert these changes and run `changeset pre exit`
ğŸ¦‹  warn You can then run `changeset version` again to do a normal release
ğŸ¦‹  warn ----------------------------------------------------------------------
ğŸ¦‹  All files have been updated. Review them and commit at your leisure
```

ç„¶åå¯ä»¥çœ‹åˆ° `package.json` ä¸­æ›´æ–°çš„ç‰ˆæœ¬å·ä¼šç±»ä¼¼è¿™æ ·ï¼š`0.1.2-next.0`ã€‚

æœ€åï¼Œ**å¦‚æœä¸éœ€è¦å†è¿›è¡Œé¢„å‘å¸ƒï¼Œåˆ™ä¸€å®šè¦æ‰§è¡Œ `modern pre exit` å‘½ä»¤**ï¼Œè¿™æ ·å¯ä»¥é€€å‡ºé¢„å‘å¸ƒçŠ¶æ€ï¼Œå¹¶ä¸”å½“å†æ¬¡æ‰§è¡Œ `modern bump` å‘½ä»¤çš„æ—¶å€™ï¼Œå°±å¯ä»¥å‘å¸ƒæ­£å¼çš„ç‰ˆæœ¬ã€‚
