# Css Usage

Builder has built-in multiple style resource processing capabilities, including Less / Sass preprocessor, PostCSS, CSS Modules, CSS inline and CSS compression.

In addition, Builder also provides multiple configs to customize the compile rules of style resources.

## Using CSS Modules

[CSS Modules](https://github.com/css-modules/css-modules) allows us to write CSS code in a modular way, and these styles can be imported and used in JavaScript files. Using CSS Modules can automatically generate unique class names, isolate styles between different modules, and avoid class name conflicts.

Builder supports CSS Modules by default, you don't need to add additional configuration. Our convention is to use the `[name].module.css` filename to enable CSS Modules.

The following style files are considered CSS Modules:

- `*.module.scss`
- `*.module.less`
- `*.module.css`

### Example

- Write style:

```css
/* button.module.css */
.error {
  background: red;
}
```

- Using styles:

```tsx
// Button.tsx
import React, { Component } from 'react';
// import style file
import styles from './button.module.css';

export default () => {
  return <button className={styles.error}>Error Button</button>;
};
```

### Remove the .module infix

By default, only files ending in `*.module.css` are treated CSS Modules.

If you want to treat all CSS files in the source directory as CSS Modules, you can enable the [output.disableCssModuleExtension](/en/api/config-output.html#output-disablecssmoduleextension) config, for example:

```ts
export default {
  output: {
    disableCssModuleExtension: true,
  },
};
```

When set, the following two files are treated as CSS Modules:

```ts
import styles1 from './foo.module.css';
import styles2 from './bar.css';
```

:::tip
We do not recommend enabling this config, because after enabling disableCssModuleExtension, CSS Modules files and ordinary CSS files cannot be clearly distinguished, which is not conducive to long-term maintenance.
:::

### Custom Class Names

Customizing the class names generated by CSS Modules is also a commonly used function, you can use [output.cssModuleLocalIdentName](/en/api/config-output.html#output-cssmodulelocalidentname) to configure it.

```ts
export default {
  output: {
    cssModuleLocalIdentName: '[hash:base64:4]',
  },
};
```

If you need to customize other configs of CSS Modules, you can set them via [tools.cssLoader](/zh/api/config-tools.html#css-loader).

## Using Less & Sass

The Builder has built-in community popular CSS preprocessors such as Less, Sass.

You can customize the loader by configuring [tools.less](/en/api/config-tools.html#tools-less) and [tools.sass](/en/api/config-tools.html#tools-sass).

## Using PostCSS

Builder has built-in [PostCSS](https://postcss.org/) to transform the CSS code.

You can configure the postcss-loader via [tools.postcss](/en/api/config-tools.html#tools-postcss).

By default, we have enabled [autoprefixer](https://github.com/postcss/autoprefixer) to add vendor prefixes to CSS rules.
If you want to configure the target browser, you can use [output.overrideBrowserslist](/en/api/config-output.html#output-overridebrowserslist) config.

## CSS Minify

Usually, in production environments we compress static resources such as CSS, JS, etc. to achieve better transfer efficiency.

Builder automatically compresses CSS code at production build time with [css-minimizer-webpack-plugin](https://github.com/webpack-contrib/css-minimizer-webpack-plugin).

You can configure [tools.minifyCss](/en/api/config-tools.html#tools-minifycss) to make it more customizable.

## Separate CSS File

By default, Builder will extract CSS into a separate `.css` file and output it to the dist directory.

If you want to inline styles into your JS file, you can set [output.disableCssExtract](/en/api/config-output.html#output-disablecssextract) to true to disable CSS extraction logic.When the JS file is requested by the browser, JS dynamically inserts the `<style>` tag into the Html to load the CSS styles.

This will increase the size of your JS Bundle, so it is usually not recommended to disable the CSS extraction.
